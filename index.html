<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Ciphered Hat Draw</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="content" class="container">

    <div class="columns col-sm-11 col-10 col-mx-auto">
        
        <div class="column col-12">
            <h1>Ciphered Hat Draw</h1>
            <h2>Instructions</h2>
            <p>One person in your group (such as the usual name-drawer) should put names and tasks in the hat and click the button. The hat will ignore any duplicates in the lists.</p>
            
            <p>If there are more names than tasks, the hat, by default, will repeat the tasks again to make sure everyone gets a task (so more than one person will have the same task).</p>
            
            <p>If there are more tasks than names, the hat, by default, will continue to distribute the tasks among people (so some people may have more than one task).</p>

            <p>If you toggle the <b>Discard extra tasks</b> option on, everyone will only get one task or less. If there's not enough tasks, only some people will get a task; if there's too many, extra tasks will be discarded.</p>

            <p>Name-drawer, send the <b>results link</b> to all participants. When a participant types in their name on the results page and clicks the <b>Get your task!</b> button, their task assignment will be revealed. (This <i>does</i> mean that anyone, such as the name-drawer, who knows participants' names can find out their assignment...but cheating defeats the point here, doesn't it?)</p>
        </div>

        <div class="column col-12">
            <h2>Hat</h2>
        </div>
        
        <div id="hattop" class="columns col-9 col-mx-auto">
            <div class="columns col-12 col-mx-auto">
                <div class="column col-sm-12 col-6 col-ml-auto">
                    <label for="names" class="form-label">Enter names separated by line: </label>
                    <textarea class="form-input" id="names" placeholder="Names"></textarea>
                </div>
                <div class="column col-sm-12 col-6 col-mr-auto">
                    <label for="tasks" class="form-label">Enter tasks separated by line: </label>
                    <textarea class="form-input" id="tasks" placeholder="Tasks"></textarea>
                </div>
            </div>
            <div class="column col-auto col-mx-auto">
                <label class="form-switch form-label">Discard extra tasks
                    <input type="checkbox" id="discard"><i class="form-icon"></i>
                </label>
            </div>
        </div>
        
        <div id="tip" class="column col-9 col-mx-auto"></div>
        
        <div id="hatbrim" class="column col-12">
            <button id="assign" class="btn wide">Assign tasks</button>
        </div>
            
        <div id="results" class="columns col-12 col-mx-auto">
            <div id="link" class="column col-7 col-sm-12 col-ml-auto"></div>
            <div id="copy" class="column col-5 col-mx-auto"></div>
        </div>

        <div class="accordion">
            <input type="checkbox" id="accordion-1" name="accordion-checkbox" hidden>
            <label class="accordion-header btn wide" for="accordion-1">
                Explanation
            </label>
            <div class="accordion-body">
                <p>A lot of virtual 'draw from a hat' tools are only visible to the one person who has the website open on their own browser. That person also knows what task got picked from the hat and who they're assigning it to.</p>

                <p>Instead with this tool, you can pass the hat assignments around without knowing what anyone else is getting (unless you "peek"). You put your names and tasks into the hat, share the link with others, and when they put their name in the results, they get their task. I feel like this aligns better with the reasons people draw from hats in person.</p>
    
                <p>It uses <a href="https://github.com/leontastic/vigenere.js">Vigen√®re Cipher</a> enciphering and deciphering in lieu of the more complicated stuff. I may change this in the future if I want to include more Unicode because the cipher breaks depending on the character but I have already spent Too Much Time on that aspect (currently it supports Unicode characters up to Latin Extended-B, basic Greek and Slavic, and some punctuation). It also encodes into/decodes from a <a href="https://pieroxy.net/blog/pages/lz-string/index.html">compression library</a> to avoid being the longest URL ever.</p>
                    
                <p>Find the repo here: <a href="https://github.com/pieartsy/hatdraw" target="_blank">Github repo</a></p>
            </div>
        </div>
        
    </div>
</div>
<script language="javascript" src="index.js"></script>
<script language="javascript" src="lz-string.js"></script>
<footer id="footer" class="flex-centered columns col-12 col-mx-auto">
    &copy Aster Fialla <script>document.write(new Date().getFullYear());</script>
</footer>
</body>
</html>